# h2

Tarkemmat tehtävänannot löytyvät osoitteesta: [terokarvinen.com](https://terokarvinen.com/2023/eettinen-hakkerointi-2023/#h2-sniff-n-scan).

## x) Lue/katso ja tiivistä.

Hoikkala "joohoi" 2020: Still Fuzzing Faster (U fool). In HelSec Virtual meetup #1.

Lyon 2009: Nmap Network Scanning: Chapter 15. Nmap Reference Guide: Port Scanning Basics (termit: open, closed, filtered), Port Scanning Techniques (komennot: -sS -sT -sU)

| Portin tila | Kuvaus |
| --- | ----------- |
| open | Palvelu hyväksyy TCP-yhteyksiä, UDP-datagrams tai SCTP-yhteyksiä aktiivisesti. Näiden löytäminen on usein porttiskannauksen päätarkoitus. |
| closed | Suljettu portti on tavoitettavissa, mutta mikään palvelu ei kuuntele sitä. Voi olla hyödyllistä skannata myöhemmin uudelleen. |
| filtered | Nmap ei pysty selvittämään, mikäli portti on auki, koska pakettien filtteröinti estää sen. Filtteröinti voi johtua laitteesta, joka sisältää palomuurin, reitittimen säännöistä tai host-based palomuurisovelluksesta. Usein tiedusteluyritykset lopetetaan ilman vastausta, mikä kuormittaa skannausta filtteröityyn porttiin, sillä Nmap yrittää sknnausta useamman kerran uudelleen. |

*Lähde: [Nmap - Port Scanning Basics](https://nmap.org/book/man-port-scanning-basics.html)*
### Nmap komennot 

```-sS``` (=TCP SYN scan)
Nmap:n suosituin vaihtoehto. Toimii nopeasti, on lisäksi huomaamaton ja vaivihkainen, sillä se ei
ikinä muodosta täyttä TCP-yhteyttä. Nmap tiedustelee ensin onko portti auki (SYN), jonka jälkeen palvelu vastaa (SYN/ACK), tämän
jälkeen Nmap katkaisee yhteyden (RST).

```-sT``` (= TCP connect scan)
Oletus, mikäli SYN-skannaus ei ole vaihtoehto. Skannaus joka noudattaa normaalin verkkoliikenteen sääntöjä.

```-sU``` (UDP scans)
UDP-skannaus on yleisesti hitaampaa ja vaikeampaa kuin TCP, joten joskus tietoturvassa nämä portit jäävät huomioimatta. UDP- ja TCP-skannaus 
voidaan ajaa myös yhdessä. Lähettää UDP-paketin jokaiseen kohdeporttiin. 

*Lähde: [Nmap - Port Scanning Techniques](https://nmap.org/book/man-port-scanning-techniques.html)*

## a) Ratkaise Teron ffuf-haastebinääri.

## b) Asenna Ffufme harjoitusmaali paikallisesti omalle koneellesi. Ratkaise tehtävät (paitsi "Content Discovery - Pipes").

## Porttiskannaa paikallinen kone (127.0.0.2 tms), sieppaa liikenne snifferillä, analysoi:

## c)

## d)

## e)

## f)

## g)

## h)

## i)

## j)

## k)

## l) Miksi UDP-skannaus on hankalaa ja epäluotettavaa? Miksi UDP-skannauksen kanssa kannattaa käyttää --reason flagia ja snifferiä?
